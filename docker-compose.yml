version: '3.8'

services:
  # Servidor y Cliente 4 (S1) - Usando Dockerfile.S1
  s1:
    build:
      context: .
      dockerfile: Dockerfile.S1
    container_name: S1_Ubuntu2210
    ports:
      # Mapear el puerto 22 del contenedor a 2222 en tu m√°quina anfitriona
      - "2222:22"
    networks:
      - ssh_lab_network

  # Cliente 1 (C1) - Usando Dockerfile.C1
  c1:
    build:
      context: .
      dockerfile: Dockerfile.C1
    container_name: C1_Ubuntu1610
    networks:
      - ssh_lab_network
    depends_on:
      - s1

  # Cliente 2 (C2) - Usando Dockerfile.C2
  c2:
    build:
      context: .
      dockerfile: Dockerfile.C2
    container_name: C2_Ubuntu1810
    networks:
      - ssh_lab_network
    depends_on:
      - s1

  # Cliente 3 (C3) - Usando Dockerfile.C3
  c3:
    build:
      context: .
      dockerfile: Dockerfile.C3
    container_name: C3_Ubuntu2010
    networks:
      - ssh_lab_network
    depends_on:
      - s1

networks:
  ssh_lab_network:
    driver: bridge